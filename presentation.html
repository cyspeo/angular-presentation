<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <meta name="keywords" content="remark,remarkjs,markdown,slideshow,presentation" />
    <meta name="description" content="A simple, in-browser, markdown-driven slideshow tool." />
    <title>AngularJS Presentation</title>
    <link rel="stylesheet" href="presentation.css"></link>
  </head>
  <body>
    <textarea id="source">
name: inverse
layout: true
class: center, middle, inverse
---
## Angular JS
Un framework javascript pour les applications Web
.footnote[[angularjs.org](http://angularjs.org)]
---
      
## Un peu d'histoire sur les applications Web
---
layout: false
.left-column[
  ## Pages statiques
]
.right-column[

```xml
<html>
  <body>
    <h1>Accueil Guillaume.io</h1>
    <p>Bienvenue sur mon site</p>
  </body>
</html>
```
]
---
.left-column[
  ## Pages statiques
  ## Pages générées
]
.right-column[
### php, perl, java (jsp), ...

```php
<html>
<body>
<h1>Accueil <?php $name="Guillaume.io"; echo $name ?></h1>
<p>Bienvenue sur mon site</p>
</body>
</html>
```
- La page devient dynamique. 
- Les données sont injectées coté serveur
]
---
.left-column[
  ## Pages statiques
  ## Pages générées
  ## Javascript & DOM
]
.right-column[
### Single Page Application
```xml
<html>
<body>
<h1></h1>
<p>Bienvenue sur mon site</p>
<script>
    h1 = document.getElementsByTagName("h1")[0];
    h1.innerHTML = "Accueil Guillaume.io";
</script>
</body>
</html>
```
- Le javascript manipule le DOM pour construire la page coté client
- Les problèmes de compatibilité entre navigateurs apparaisent!
- Architecture Ajax : applications web dynamiques et interactives
]
---
.left-column[
## Pages statiques
## Pages générées
## Javascript & DOM
## jQuery
]
.right-column[
### Single Page Application
```xml
<html>
<body>
<h1></h1>
<p>Bienvenue sur mon site</p>
<script>
    $("h1").innerHTML("Accueil Guillaume.io");
</script>
</body>
</html>
```
- Même manipulation du DOM
- Sélection des éléments plus puissante
- Compatibilité des navigateurs gérée par la librairie
- Très fortement lié au Id du DOM

]      
---
.left-column[
## Pages statiques
## Pages générées
## Javascript & DOM
## jQuery
## AngularJS
]
.right-column[
### Single Page Application
```xml
<html ng-app="app">
<head>
  <script type="text/javascript" src="mainCtrl.js"></script>
</head>
<body ng-controller="mainCtrl as main">
  <h1>Accueil {{main.name}} </h1>
  <p>Bienvenue sur mon site</p>
</body>
</html>
```
- Séparation HTML / traitement
- Data-Binding
- Injection des dépendances
- Même manipulation du DOM au moyen de directives

]      
---
name:exemple

## Exemple d'application Web Javascript
.large-image[
  ![dashborad](dashboard.jpg)
]      
---
template: inverse
class: center

## Angular JS
Les concepts dans le détail
---
layout: false
### Concepts clés
Le framework repose sur un mécanisme de directives, utilisées sous forme de mot clés à insérer dans le HTML.

La force des développeurs d'Angular est de proposer une vision de l'architecture d'une application Javascript avec quelques préconisations : 
- découplage du DOM et de la logique,
- utilisation de composants,
- automatisation des tests,
- découplage client/serveur.

Le développement est simplifié par l'utilisation de principes tel que : 
- le pattern MVC ou MV*
- le Data-Binding
- la modularité
- Injection des dépendances
- le routage

---
### Un "boilerplate" réduit
Le code suivant est suffisant pour démarrer une application angular :
```html
<html>
   <head>
      <script src="lib/angular.js"></script>     
      <script src="app.js"></script>  
   </head>       
   <body ng-app="app">
      <script>
         var app = angular.module('app', []);
      </script>         
   </body>       
</html>  
```
```javascript
var app = angular.module('app', []);
```


.footnote[.pull-rigth.black[<small>*Les exemples HTML suivant ce concentrerons sur le ```<body>```*</small>]] 

---
### **Controller**, Data-Binding et Scope
Ces trois concepts portent ensemble la colonne vertebrale d'angular.  
- Il participe au découplage DOM - logique
- Le controller implemente l'objet $scope qui permet la communication avec la vue
- Il contient les fonctions à appeler 
 
```html
<body ng-app="app" ng-controller="mainCtrl as main">
</body>       
```
```javascript
var app = angular.module('app', []);
app.controller('mainCtrl', function($scope) {
   $scope.name="Cedric";
   $scope.raz = function(){ 
       $scope.name = "";
   }
});
```
---
### Controller, **Data-Binding** et Scope
- C'est un moyen de lier la vue au controller.
- Toutes les données contenues dans le scope sont concernées
- Lorsqu'une donnée change coté controleur, la vue est modifiée automatiquement et inversement.
#### Exemple
.sample[
<iframe width="100%" height="300" src="./ex/ex1.html" allowfullscreen="allowfullscreen" frameborder="0"></iframe>
]

---
### Controller, Data-Binding et **Scope**
- Le scope est un objet partagé entre la vue est le controller,
- Il représente le modèle de l'application
- Chaque controleur créé son propre scope
- L'application a un scope global **$rootScope** qui englobe tous les scopes
```html
<body ng-app="app" >
    <h1>Simple Data Binding with AngularJS</h1>
    <br />
    <div  ng-controller="mainCtrl">
        Name: <input type="text" ng-model="name" />
        <button ng-click="raz()">Raz</button>
        <br /><br /> Welcome to AngularJS {{name}}
    </div>
</body>
```
```javascript
var app = angular.module('app', []);
app.controller('mainCtrl', function($scope) {
   $scope.name="Cedric";
   $scope.raz = function(){ 
       $scope.name = "";
   }
 }); 
```
---
##Pattern MVC
Les trois concepts, controller, binding et scope forme ensemble le pattern MVC.

![mvc](mvc.jpg)
On retrouve les principes préconisés par angular : 
- découplage du DOM et de la logique,  
- le pattern MVC ou MV*
- le Data-Binding


---
## Les services
- Les services d'Angular sont des fonctions ou des objets avec un but bien précis. 
- Cela participe au désire de modularité voulu par les développeurs d'Angular.
- Ce sont des singletons (instance unique).
- Comme pour les directives les services d'Angular ont une notation particulière : il commence par **$**

Angular fourni des services très utiles :
- $location: permet d'intéragir avec l'URL du navigateurs
- $route: permet de changer de vue en fonciton de l'URL
- $http: permet de communiquer avec le serveur

---

## L'injection des dépendances

- Permet à des modules de ne pas se soucier de l'instanciation des modules dont il dépend. 
- Angular va donc rechercher les services dont nous avons besoins, récupèrer leur instance et les injecter dans notre controleur.
- L'ordre des services injectés n'a pas d'importance
```javascript
        var mainCtrl = function($scope, $http) {
           ...
        }
```
- Seconde notation nécessaire lorsqu'on minimise le javascript
```javascript
        var mainCtrl = ["$scope", "$http", function($scope, $http) {
           ...
        }];
```

---

## Création d'un services

- La création d'un service est assez simple. 
- Il suffit de déclarer une fonction au module de notre application.
- L'exemple présenté, créé un service qui utilise le service $http pour récupèrer un flux rss sur un server.

```javascript
app.service('FeedService', ['$http', function ($http) {
        this.parseFeed = function (url) {
            return $http.jsonp('//ajax.googleapis.com/ajax/services/feed/load?v=1.0&amp;num=50&amp;callback=JSON_CALLBACK&amp;q=' + encodeURIComponent(url));
        }
}]);
```
```javascript
app.controller("FeedCtrl", ['$scope', 'FeedService', function($scope, Feed) {
    $scope.loadButonText = "Load";
    $scope.loadFeed = function (e) {
        Feed.parseFeed($scope.feedSrc).then(function (res) {
            $scope.loadButonText = angular.element(e.target).text();
            $scope.feeds = res.data.responseData.feed.entries;
        },function errorCallback(response) {});        
        });
  ;
    }
}]);
```


---

## Manipulation du DOM au moyen de directives
- Les directives sont des attributs utilisés dans le code HTML.
- Elles permettent de modifier ou transformer le DOM.
- Pour bien les reconnaitre elles ont le prefixe **ng-**.


- **ng-app** : permet d'initialiser l'application
- **ng-controller** : permet d'associer un controller à un élément du DOM
- **ng-model** : permet de lié un input, textarea ou select à une variable du contexte actuel (scope)


```html
<body ng-app="app" >
    <h1>Simple Data Binding with AngularJS</h1>
    <br />
    <div  ng-controller="mainCtrl">
        Name: <input type="text" ng-model="name" />
        <button ng-click="raz()">Raz</button>
        <br /><br /> Welcome to AngularJS {{name}}
    </div>
</body>
```

---
## Les filtres

---
## La gestion des routes

---

## Les tests

---


template: inverse
class: center

## L'environnement de developpement
Comment coder !
---

template: inverse
class: center

## Angular chez ITCE
Ce que ITCE fait avec Angular



    </textarea>
    <script src="https://remarkjs.com/downloads/remark-latest.min.js">
    <script type="text/javascript">
      var hljs = remark.highlighter.engine;
    </script>
    <script src="remark.language.js" type="text/javascript"></script>
    <script type="text/javascript">
      var slideshow = remark.create({
          highlightStyle: 'monokai',
          highlightLanguage: 'remark'
        }) ;
    </script>
    </body>
    </html>
